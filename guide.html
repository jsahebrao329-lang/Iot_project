<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weather Guide</title>
  <style>
    :root{
      --bg: #0b1320;
      --card: #0f1724;
      --muted: #93b2c7;
      --accent: #5dd0ff;
      --glass: rgba(255,255,255,0.03);
      --surface: #eaf6ff;
      --danger: #ff8a8a;
      --radius: 12px;
      --max-width: 920px;
    }
 
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(180deg,var(--bg) 0%, #071025 100%);
      color:#e8f8ff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
      display:flex; justify-content:center; padding:28px 16px;
    }

    .container{
      width:100%;
      max-width:var(--max-width);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:20px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
    }

    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px;
    }
    header h1{font-size:1.25rem; margin:0; color:var(--surface);}
    header a{
      color:var(--accent);
      background:transparent;
      padding:8px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.03);
      text-decoration:none;
      font-weight:600;
      transition:transform .12s ease;
    }
    header a:hover{transform:translateY(-2px)}

    .layout{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:18px;
    }

  
    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      padding:14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.02);
    }
    .guide-info h2, .guide-chat h2 { margin:0 0 8px 0; color:var(--surface) }
    .guide-info ul{ margin:8px 0 0 18px; color:var(--muted) }
    .guide-info li{ margin:6px 0; }


    .input-row{
      display:flex; gap:8px; margin-top:10px;
    }
    #guideInput{
      flex:1;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.04);
      background: rgba(255,255,255,0.02);
      color:var(--surface);
      outline:none;
      font-size:14px;
    }
    #guideInput::placeholder{ color: #7aa9bf; }
    button.btn{
      padding:10px 12px;
      border-radius:10px;
      border:none;
      background: linear-gradient(90deg,var(--accent), #2bb0ff);
      color:#001824;
      font-weight:700;
      cursor:pointer;
    }
    button.ghost{
      background: transparent;
      border:1px solid rgba(255,255,255,0.04);
      color:var(--surface);
      font-weight:600;
    }

    #guideResponse{
      margin-top:12px;
      min-height:72px;
      background:#f6fbff;
      color:#0b1a20;
      padding:12px;
      border-radius:10px;
      border:1px solid #e6f3fb;
      white-space:pre-wrap;
      font-size:14px;
    }

    .quick-row{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
    .quick-row button{ background:var(--glass); border:1px solid rgba(255,255,255,0.03); color:var(--muted); padding:6px 10px; border-radius:8px; cursor:pointer; }
    .quick-row button:hover{ transform:translateY(-2px) }

   
    .sidebar h3{ margin:0 0 8px 0; color:var(--surface) }
    #faqList{ display:flex; flex-direction:column; gap:8px; max-height:480px; overflow:auto; padding-right:6px; }
    details.faq{
      background: rgba(255,255,255,0.02);
      border-radius:8px;
      padding:8px 10px;
      border:1px solid rgba(255,255,255,0.02);
      color:var(--muted);
    }
    summary{ font-weight:700; cursor:pointer; color:var(--surface) }
    summary::-webkit-details-marker{ display:none; }
    .faq p{ margin:8px 0 0 0; color: #072028; background:#eaf6ff; padding:8px; border-radius:6px; }

    .recent{ margin-top:12px; display:flex; flex-direction:column; gap:8px; }
    .recent button{ text-align:left; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:var(--muted); cursor:pointer; }

    footer{ margin-top:14px; text-align:center; color:var(--muted); font-size:13px; }

    @media (max-width:900px){
      .layout{ grid-template-columns: 1fr; }
      .sidebar{ order:2 }
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header>
      <h1>Weather Guidance</h1>
      <a href="index.html" aria-label="Back to home">← Back to Home</a>
    </header>

    <div class="layout">
      
      <section class="panel" aria-labelledby="tipsTitle">
        <div class="guide-info">
          <h2 id="tipsTitle">General Weather Tips</h2>
          <ul>
            <li>Check temperature regularly to dress appropriately.</li>
            <li>Carry umbrellas or raincoats in rainy seasons.</li>
            <li>Stay hydrated and avoid midday sun on hot days.</li>
            <li>Layer clothing during cold spells; wind increases chill.</li>
            <li>Monitor air quality alerts if you have respiratory conditions.</li>
          </ul>
        </div>

        <div class="guide-chat" style="margin-top:14px;">
          <h2>Ask a Question</h2>

          <div class="input-row" role="search">
            <input id="guideInput" type="text" inputmode="text" autocomplete="off"
                   placeholder="Type your weather question (e.g., 'Will it rain tomorrow?')" aria-label="Ask the weather guide">
            <button id="guideAskBtn" class="btn" aria-label="Ask">Ask</button>
            <button id="guideClearBtn" class="ghost" aria-label="Clear">Clear</button>
          </div>

          <div class="quick-row" aria-hidden="false" style="margin-top:10px;">
            <button class="quick" data-q="Will it rain today?">Will it rain today?</button>
            <button class="quick" data-q="How hot will it be tomorrow?">How hot tomorrow?</button>
            <button class="quick" data-q="What does feels like mean?">What is "feels like"?</button>
          </div>

          <div id="guideResponse" aria-live="polite"></div>
        </div>
      </section>

      <aside class="sidebar" aria-labelledby="faqTitle">
        <div class="panel">
          <h3 id="faqTitle">Top FAQs</h3>
          <div id="faqList" role="list">
        
          </div>

          <div style="margin-top:12px;">
            <h3>Recent Questions</h3>
            <div id="recent" class="recent" aria-live="polite">
            
            </div>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      <small>Tip: press <kbd>Enter</kbd> in the input to ask — recent questions are saved in your browser.</small>
    </footer>
  </div>

  <script>
   
    (function(){
      const guideInput = document.getElementById('guideInput');
      const guideAskBtn = document.getElementById('guideAskBtn');
      const guideResponse = document.getElementById('guideResponse');
      const guideClearBtn = document.getElementById('guideClearBtn');
      const faqList = document.getElementById('faqList');
      const quickButtons = document.querySelectorAll('.quick');
      const recentEl = document.getElementById('recent');

   
      const FAQs = [
        { q: 'How do I check temperature?', a: 'Use the main page search to get current temperature for your city. Toggle °C/°F to change units.' },
        { q: 'What does "Feels like" mean?', a: '"Feels like" is the perceived temperature after humidity and wind are taken into account.' },
        { q: 'How do I get a 7-day forecast?', a: 'This demo uses hourly/3-hour forecast. For full 7-day data use a One Call API on a secure backend.' },
        { q: 'Why is my city not found?', a: 'Try adding a country code (e.g., "Springfield, US"), or check spelling and try a nearby large city.' },
        { q: 'How to handle sudden weather?', a: 'For sudden severe weather, follow local weather alerts and move indoors if advised.' }
      ];

    
      function renderFAQs(){
        faqList.innerHTML = '';
        FAQs.forEach(item => {
          const d = document.createElement('details');
          d.className = 'faq';
          const s = document.createElement('summary');
          s.textContent = item.q;
          const p = document.createElement('p');
          p.textContent = item.a;
          d.appendChild(s);
          d.appendChild(p);
          faqList.appendChild(d);
        });
      }


      let recent = JSON.parse(localStorage.getItem('weatherGuideRecent') || '[]');
      function renderRecent(){
        recentEl.innerHTML = '';
        if (recent.length === 0){
          const p = document.createElement('div');
          p.style.color = '#8aa9b8';
          p.textContent = 'No recent questions yet.';
          recentEl.appendChild(p);
          return;
        }
        recent.forEach(q => {
          const btn = document.createElement('button');
          btn.textContent = q;
          btn.addEventListener('click', ()=> {
            guideInput.value = q;
            handleAsk();
          });
          recentEl.appendChild(btn);
        });
      }
      function saveRecent(q){
        if(!q) return;
        recent = recent.filter(x => x !== q);
        recent.unshift(q);
        if (recent.length > 6) recent.pop();
        localStorage.setItem('weatherGuideRecent', JSON.stringify(recent));
        renderRecent();
      }

      
      function findFAQMatch(text){
        text = text.toLowerCase();
      
        for (const f of FAQs){
          if (text.includes(f.q.toLowerCase()) || f.q.toLowerCase().split(' ').every(w => text.includes(w))) {
            return f.a;
          }
        }
        //  rules
        if (text.includes('rain') || text.includes('precip')) return 'Check your city’s forecast on the home page — precipitation and chance of rain are shown in the hourly cards.';
        if (text.includes('temperature') || text.includes('hot') || text.includes('cold')) return 'Search a city on the home page to see the current temperature and toggle °C/°F.';
        if (text.includes('feels like') || text.includes('feels')) return '"Feels like" accounts for humidity and wind when estimating perceived temperature.';
        if (text.includes('forecast') || text.includes('7-day') || text.includes('week')) return 'For multi-day forecasts you can use the One Call API (recommended via a server-side proxy).';
        if (text.includes('api') || text.includes('key')) return 'Do not expose API keys in client-side code for production. Use a small backend proxy to keep them secret.';
        return null;
      }

      function handleAsk(){
        const query = guideInput.value.trim();
        if (!query){
          guideResponse.textContent = 'Please type a question.';
          return;
        }
      
        const matched = findFAQMatch(query);
        if (matched){
          guideResponse.textContent = matched;
        } else {
          guideResponse.textContent = "Sorry, I didn't understand that. Try asking about temperature, forecast, or rain.";
        }
        saveRecent(query);
      }

      guideAskBtn.addEventListener('click', handleAsk);
      guideClearBtn.addEventListener('click', ()=> {
        guideInput.value = '';
        guideResponse.textContent = '';
        guideInput.focus();
      });
      guideInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') handleAsk();
      });
      quickButtons.forEach(b => {
        b.addEventListener('click', ()=> {
          guideInput.value = b.dataset.q;
          handleAsk();
        });
      });

      
      renderFAQs();
      renderRecent();
    })();
  </script>
</body>
</html>
